{% from "macros.html" import status_bootstrap_class %}

{% extends "layout.html" %}

{% block subnav %}
    <div class="subnav subnav-fixed">
        <div class="container">
            <ul class="nav nav-pills">
              <li><a href="{{ url_for('clear_queue') }}">Clear tasks</a></li>
              <li><a href="{{ url_for('add_to_queue') }}">Queue task</a></li>
            </ul>
        </div>
    </div>
{% endblock %}


{% block page %}
    <table class="table table-striped table-bordered table-condensed">
        <thead>
            <tr>
                <th>status</th>
                <th>completed</th>
                <th>result</th>
                <th>trace</th>
                <th>id</th>
            </tr>
        </thead>
        <tbody>
        {%- for task in tasks %}
            <tr>
                <td><span class="label label-{{ status_bootstrap_class(task.status) }}">{{task.status}}</span></td>
                <td>{{ task.date_done }}</td>
                <td>{{ task.result }}</td>
                <td>{{ task.traceback|safe }}</td>
                <td>{{ task._id }}</td>
            </tr>
        {%- endfor %}
         </tbody>
    </table>
{% endblock %}